location:
    source_directories:
        - /mnt/borg_windows_content

    repositories:
        !include /etc/borgmatic.d/shared/repo.yaml

    one_file_system: false

    exclude_patterns:
        - pf:/mnt/borg_windows_content/SSD/Temp
        - pf:/mnt/borg_windows_content/SSD/pagefile.sys
        - pf:/mnt/borg_windows_content/SSD/hiberfil.sys

    # Lots of unused metadata
    numeric_owner: true
    atime: false
    ctime: false
    birthtime: false
    bsd_flags: false

storage:
    archive_name_format: 'TAM_ntbk-windows-content-{now}'
    <<: !include /etc/borgmatic.d/shared/storage.yaml


# Just because it's mandatory:
retention:
    prefix: INVALID-

hooks:
    before_backup:
         - /etc/borgmatic.d/windows_hooks.sh content_pre
    after_backup:
         - /etc/borgmatic.d/windows_hooks.sh content_post

    umask: 0077
